<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zoom-In Activity Simulation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .container {
            max-width: 800px;
        }
        .animated-item {
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }
        .btn-disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .feedback-message {
            display: none;
            padding: 1rem;
            border-radius: 0.5rem;
            margin-top: 1rem;
            font-weight: 600;
        }
        .feedback-correct {
            background-color: #d1fae5;
            color: #065f46;
        }
        .feedback-incorrect {
            background-color: #fee2e2;
            color: #991b1b;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 p-4 sm:p-8">

    <main class="container mx-auto bg-white rounded-xl shadow-lg p-6 sm:p-10 my-8">

        <h1 class="text-4xl font-bold text-center mb-6 text-indigo-700">Zoom-In Activity Simulation</h1>
        <p class="text-center text-lg mb-8 text-gray-600">Explore the crystalline structure of sodium chloride through a step-by-step reveal.</p>
        
        <!-- Instructions Section -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8 border-l-4 border-indigo-500">
            <h2 class="text-xl font-semibold mb-2 text-indigo-700">Instructions</h2>
            <p class="text-gray-700">
                As you go through each stage, observe the diagram closely and record your observations. Then, click on the possible answers to check. When you move to the next stage, reflect on the new information you've gathered and consider whether it changes your earlier ideas.
            </p>
        </div>

        <!-- Stage 1 -->
        <div id="stage-1" class="transition-opacity duration-500 ease-in-out opacity-100">
            <h2 class="text-2xl font-semibold mb-4 text-indigo-600">Stage 1: Initial View</h2>
            <div class="flex flex-col items-center mb-6">
                <!-- Image for Stage 1 -->
                <img src="https://i.imgur.com/tGgvMkS.jpeg" alt="Image of a pair of ions" class="w-full max-w-sm rounded-lg shadow-md mb-4">
                <p class="text-sm text-gray-500 italic">An initial, distant view of the subject.</p>
            </div>
            
            <p class="text-lg font-medium mb-4">
                What do you see?
            </p>
            <p class="text-indigo-600 font-bold mb-2">I see...</p>
            <textarea id="response-1" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-shadow" rows="4" placeholder="Type your response here..."></textarea>
            
            <div id="feedback-1" class="feedback-message"></div>

            <div class="flex justify-end mt-4 space-x-4">
                <button id="check-answer-1" class="px-6 py-2 border-2 border-green-500 text-green-500 font-semibold rounded-lg hover:bg-green-50 transition-colors btn-disabled">
                    Check My Answer
                </button>
                <button id="show-reasons-1" class="px-6 py-2 border-2 border-indigo-500 text-indigo-500 font-semibold rounded-lg hover:bg-indigo-50 transition-colors btn-disabled">
                    Possible Answers
                </button>
                <button id="next-1" class="px-6 py-2 bg-indigo-500 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-600 transition-colors hidden btn-disabled">
                    Reveal Stage 2
                </button>
            </div>

            <!-- Expert Responses for Stage 1 -->
            <div id="expert-1" class="mt-8 bg-indigo-50 p-6 rounded-lg shadow-inner hidden">
                <h3 class="text-xl font-semibold text-indigo-700 mb-4">Possible Responses:</h3>
                <ul class="list-disc pl-6 space-y-2 text-gray-700">
                    <li class="animated-item">A pair of ions.</li>
                    <li class="animated-item">One ion is positive and another is negative.</li>
                    <li class="animated-item">One ion is small and another is bigger.</li>
                    <li class="animated-item">The two ions are linked or bonded.</li>
                </ul>
            </div>
        </div>

        <!-- Stage 2 -->
        <div id="stage-2" class="transition-opacity duration-500 ease-in-out opacity-0 hidden">
            <h2 class="text-2xl font-semibold mb-4 text-indigo-600">Stage 2: Closer View</h2>
            <div class="flex flex-col items-center mb-6">
                <!-- Image for Stage 2 -->
                <img src="https://i.imgur.com/mni18ad.jpeg" alt="Image of a single cube within the structure" class="w-full max-w-sm rounded-lg shadow-md mb-4">
                <p class="text-sm text-gray-500 italic">A closer look at a single repeating unit.</p>
            </div>
            
            <p class="text-lg font-medium mb-4">
                Can you mentally trace a cube? Now, just focus on the cube... What new things do you see?
            </p>
            <p class="text-indigo-600 font-bold mb-2">I see...</p>
            <textarea id="response-2" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-shadow" rows="4" placeholder="Type your response here..."></textarea>

            <div id="feedback-2" class="feedback-message"></div>

            <div class="flex justify-end mt-4 space-x-4">
                <button id="check-answer-2" class="px-6 py-2 border-2 border-green-500 text-green-500 font-semibold rounded-lg hover:bg-green-50 transition-colors btn-disabled">
                    Check My Answer
                </button>
                <button id="show-reasons-2" class="px-6 py-2 border-2 border-indigo-500 text-indigo-500 font-semibold rounded-lg hover:bg-indigo-50 transition-colors btn-disabled">
                    Possible Answers
                </button>
                <button id="next-2" class="px-6 py-2 bg-indigo-500 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-600 transition-colors hidden btn-disabled">
                    Reveal Stage 3
                </button>
            </div>

            <!-- Expert Responses for Stage 2 -->
            <div id="expert-2" class="mt-8 bg-indigo-50 p-6 rounded-lg shadow-inner hidden">
                <h3 class="text-xl font-semibold text-indigo-700 mb-4">Possible Responses:</h3>
                <ul class="list-disc pl-6 space-y-2 text-gray-700">
                    <li class="animated-item">All ions are linked up/bonded.</li>
                    <li class="animated-item">The positive ion is always bonded to the negative ion but not to another positive ion.</li>
                    <li class="animated-item">The ions are at the corners of the cube.</li>
                    <li class="animated-item">The number of positive ions is equal to the number of negative ions.</li>
                    <li class="animated-item">The ratio of positive to negative ions is 1:1.</li>
                </ul>
            </div>
        </div>

        <!-- Stage 3 -->
        <div id="stage-3" class="transition-opacity duration-500 ease-in-out opacity-0 hidden">
            <h2 class="text-2xl font-semibold mb-4 text-indigo-600">Stage 3: The Final Reveal</h2>
            <div class="flex flex-col items-center mb-6">
                <!-- Image for Stage 3 -->
                <img src="https://i.imgur.com/uoGwefq.jpeg" alt="Image of the full lattice structure" class="w-full max-w-sm rounded-lg shadow-md mb-4">
                <p class="text-sm text-gray-500 italic">The complete, repeating crystalline structure.</p>
            </div>
            
            <p class="text-lg font-medium mb-4">
                Now that you see the full picture, share your thoughts about the structure. What new things do you see?
            </p>
            <p class="text-indigo-600 font-bold mb-2">I see...</p>
            <textarea id="response-3" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-shadow" rows="4" placeholder="Type your response here..."></textarea>

            <div id="feedback-3" class="feedback-message"></div>

            <div class="flex justify-end mt-4 space-x-4">
                <button id="check-answer-3" class="px-6 py-2 border-2 border-green-500 text-green-500 font-semibold rounded-lg hover:bg-green-50 transition-colors btn-disabled">
                    Check My Answer
                </button>
                <button id="show-reasons-3" class="px-6 py-2 border-2 border-indigo-500 text-indigo-500 font-semibold rounded-lg hover:bg-indigo-50 transition-colors btn-disabled">
                    Possible Answers
                </button>
                <button id="show-misconception" class="px-6 py-2 bg-red-500 text-white font-semibold rounded-lg shadow-md hover:bg-red-600 transition-colors">
                    Important Misconception
                </button>
                <button id="next-3" class="px-6 py-2 bg-green-500 text-white font-semibold rounded-lg shadow-md hover:bg-green-600 transition-colors hidden btn-disabled">
                    Complete Simulation
                </button>
            </div>

            <!-- Expert Responses for Stage 3 -->
            <div id="expert-3" class="mt-8 bg-indigo-50 p-6 rounded-lg shadow-inner hidden">
                <h3 class="text-xl font-semibold text-indigo-700 mb-4">Possible Responses:</h3>
                <ul class="list-disc pl-6 space-y-2 text-gray-700">
                    <li class="animated-item">It has a regular arrangement (solid?).</li>
                    <li class="animated-item">The distance between the ions is equal (space?).</li>
                    <li class="animated-item">The cube is repeated.</li>
                    <li class="animated-item">The ions are interlinked (strength of bonds?).</li>
                </ul>
            </div>
        </div>

        <!-- Misconception Page -->
        <div id="misconception-page" class="transition-opacity duration-500 ease-in-out opacity-0 hidden">
            <h2 class="text-2xl font-bold text-red-600 mb-4">Important Misconception to Address</h2>
            <p class="text-lg text-gray-700 mb-6">
                This structure is not a single molecule or "ion-pair." It is a giant, repeating lattice of ions. The misconception that an ion-pair is a molecule often comes from simplified electronic structure drawings. The key takeaway is the concept of a giant ionic lattice, not a discrete molecule.
            </p>
            <div class="flex justify-start mt-8">
                <button id="back-button" class="px-6 py-2 border-2 border-gray-400 text-gray-600 font-semibold rounded-lg hover:bg-gray-200 transition-colors">
                    Back to Simulation
                </button>
            </div>
        </div>

    </main>

    <script>
        const stage1 = document.getElementById('stage-1');
        const next1 = document.getElementById('next-1');
        const showReasons1 = document.getElementById('show-reasons-1');
        const checkAnswer1 = document.getElementById('check-answer-1');
        const response1 = document.getElementById('response-1');
        const expert1 = document.getElementById('expert-1');
        const feedback1 = document.getElementById('feedback-1');
        
        const stage2 = document.getElementById('stage-2');
        const next2 = document.getElementById('next-2');
        const showReasons2 = document.getElementById('show-reasons-2');
        const checkAnswer2 = document.getElementById('check-answer-2');
        const response2 = document.getElementById('response-2');
        const expert2 = document.getElementById('expert-2');
        const feedback2 = document.getElementById('feedback-2');

        const stage3 = document.getElementById('stage-3');
        const next3 = document.getElementById('next-3');
        const showReasons3 = document.getElementById('show-reasons-3');
        const checkAnswer3 = document.getElementById('check-answer-3');
        const response3 = document.getElementById('response-3');
        const expert3 = document.getElementById('expert-3');
        const showMisconception = document.getElementById('show-misconception');

        const misconceptionPage = document.getElementById('misconception-page');
        const backButton = document.getElementById('back-button');
        
        const possibleAnswers1 = [
            "A pair of ions", 
            "Sodium and chloride ions", 
            "One ion is positive and another is negative", 
            "One ion is small and another is bigger", 
            "The two ions are linked or bonded"
        ];
        
        const possibleAnswers2 = [
            "All ions are linked up/bonded",
            "The positive ion is always bonded to the negative ion but not to another positive ion",
            "The ions are at the corners of the cube",
            "The number of positive ions is equal to the number of negative ions",
            "The ratio of positive to negative ions is 1:1"
        ];
        
        const possibleAnswers3 = [
            "It has a regular arrangement (solid?)",
            "The distance between the ions is equal (space?)",
            "The cube is repeated",
            "The ions are interlinked (strength of bonds?)"
        ];

        function animateExpertResponses(expertElement, callback) {
            const items = expertElement.querySelectorAll('li');
            expertElement.classList.remove('hidden');
            let delay = 0;
            items.forEach((item, index) => {
                setTimeout(() => {
                    item.classList.remove('animated-item');
                    if (index === items.length - 1) {
                        if (callback) callback();
                    }
                }, delay);
                delay += 1000; 
            });
        }

        function checkInput(textarea, ...buttons) {
            if (textarea.value.trim() !== '') {
                buttons.forEach(button => button.classList.remove('btn-disabled'));
            } else {
                buttons.forEach(button => button.classList.add('btn-disabled'));
            }
        }

        function checkAnswer(userAnswer, possibleAnswers, feedbackElement) {
            const trimmedAnswer = userAnswer.toLowerCase().trim();
            const isCorrect = possibleAnswers.some(answer => trimmedAnswer.includes(answer.toLowerCase()));
            
            feedbackElement.style.display = 'block';
            feedbackElement.classList.remove('feedback-correct', 'feedback-incorrect');
            
            if (isCorrect) {
                feedbackElement.classList.add('feedback-correct');
                feedbackElement.textContent = "Great observation! You've identified a key point.";
            } else {
                feedbackElement.classList.add('feedback-incorrect');
                feedbackElement.textContent = "That's an interesting thought! Now, check out the possible answers to see if you can find the key points.";
            }
        }

        response1.addEventListener('input', () => {
            checkInput(response1, checkAnswer1, showReasons1, next1);
        });
        checkAnswer1.addEventListener('click', () => {
            checkAnswer(response1.value, possibleAnswers1, feedback1);
            next1.classList.remove('hidden');
        });
        showReasons1.addEventListener('click', () => {
            animateExpertResponses(expert1);
        });
        
        response2.addEventListener('input', () => {
            checkInput(response2, checkAnswer2, showReasons2, next2);
        });
        checkAnswer2.addEventListener('click', () => {
            checkAnswer(response2.value, possibleAnswers2, feedback2);
            next2.classList.remove('hidden');
        });
        showReasons2.addEventListener('click', () => {
            animateExpertResponses(expert2);
        });

        response3.addEventListener('input', () => {
            checkInput(response3, checkAnswer3, showReasons3, next3);
        });
        checkAnswer3.addEventListener('click', () => {
            checkAnswer(response3.value, possibleAnswers3, feedback3);
            next3.classList.remove('hidden');
        });
        showReasons3.addEventListener('click', () => {
            animateExpertResponses(expert3);
        });
        
        next1.addEventListener('click', () => {
            stage1.classList.add('opacity-0');
            setTimeout(() => {
                stage1.classList.add('hidden');
                stage2.classList.remove('hidden');
                setTimeout(() => {
                    stage2.classList.remove('opacity-0');
                }, 50);
            }, 500);
        });
        
        next2.addEventListener('click', () => {
            stage2.classList.add('opacity-0');
            setTimeout(() => {
                stage2.classList.add('hidden');
                stage3.classList.remove('hidden');
                setTimeout(() => {
                    stage3.classList.remove('opacity-0');
                }, 50);
            }, 500);
        });

        next3.addEventListener('click', () => {
            stage3.classList.add('opacity-0');
            setTimeout(() => {
                stage3.classList.add('hidden');
            }, 500);
        });
        
        showMisconception.addEventListener('click', () => {
            stage3.classList.add('opacity-0');
            setTimeout(() => {
                stage3.classList.add('hidden');
                misconceptionPage.classList.remove('hidden');
                setTimeout(() => {
                    misconceptionPage.classList.remove('opacity-0');
                }, 50);
            }, 500);
        });
        
        backButton.addEventListener('click', () => {
            misconceptionPage.classList.add('opacity-0');
            setTimeout(() => {
                misconceptionPage.classList.add('hidden');
                stage3.classList.remove('hidden');
                setTimeout(() => {
                    stage3.classList.remove('opacity-0');
                }, 50);
            }, 500);
        });
    </script>
</body>
</html>